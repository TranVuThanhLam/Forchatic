<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>WebSocket Demo</title>
</head>
<body>
  <h1>K·∫øt n·ªëi WebSocket qua Tailscale</h1>
  <div id="status">ƒêang k·∫øt n·ªëi...</div>
  <input type="text" id="messageInput" placeholder="Nh·∫≠p tin nh·∫Øn..." />
  <button id="sendBtn">G·ª≠i</button>
  <div id="chat"></div>

  <script>
    const ws = new WebSocket(`wss://${window.location.host}`);
    const status = document.getElementById("status");
    const chat = document.getElementById("chat");

    ws.onopen = () => {
      status.innerText = "‚úÖ ƒê√£ k·∫øt n·ªëi!";
    };

    ws.onmessage = (event) => {
      const p = document.createElement("p");
      p.textContent = "üì© " + event.data;
      chat.appendChild(p);
    };

    ws.onclose = () => {
      status.innerText = "‚ùå M·∫•t k·∫øt n·ªëi";
    };

    document.getElementById("sendBtn").onclick = () => {
      const msg = document.getElementById("messageInput").value;
      ws.send(msg);
    };
  </script>
</body>
</html>
